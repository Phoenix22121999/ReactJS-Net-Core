{"ast":null,"code":"var _jsxFileName = \"E:\\\\H\\u1ECDc T\\u1EADp\\\\React-Redux\\\\react-app\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Search from \"./Component/Search\";\nimport SortDropDown from \"./Component/SortDropDown\";\nimport * as Action from \"./Actions/index\";\nimport * as URL from \"./Const/URL\";\nimport AddTaskButton from \"./Component/AddTaskButton\";\nimport Button from \"react-bootstrap/Button\";\nimport Chatbox from \"./Component/Chatbox\";\nimport TaskTable from \"./Component/TaskTable\";\nimport ShowChartButton from \"./Component/ShowChartButton\";\nimport AddTaskReduxForm from \"./Component/AddTaskReduxForm\";\nimport Chart from \"./Component/Chart\";\nimport { connect } from \"react-redux\";\nimport SignInSignUpRouter from \"./Component/SignInSignUpRouter\";\nimport AppNavbar from \"./Component/AppNavbar\";\nimport connection from \"./Reducer/ConnectHub\";\nimport { connectionStart } from \"./Reducer/ConnectHub\";\nimport ChatGroup from \"./Component/ChatGroup\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faComments } from \"@fortawesome/free-solid-svg-icons\";\nimport { Col } from \"react-bootstrap\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chatToggle: false\n    };\n    this.AddTask = this.AddTask.bind(this);\n    this.checkLogin = this.checkLogin.bind(this);\n    this.toggleChat = this.toggleChat.bind(this);\n    connection.on(\"ReceiveMessage\", message => {\n      console.log(\"đã nhận:\", message);\n      fetch(\"http://localhost:3000/api/Todo\", {\n        method: \"GET\"\n      }).then(response => {\n        // console.log(response);\n        return response.json();\n      }).catch(e => {\n        console.error(\"Err\", e);\n      }).then(data => {\n        // console.log(data);\n        localStorage.setItem(\"Tasks\", JSON.stringify(data)); // console.log(data);\n        // Cookies.set(\"Task\", data);\n        // console.log(localStorage.getItem(\"Tasks\"));\n      }).then(() => {\n        this.props.resetTask();\n      });\n    });\n  }\n\n  componentDidMount() {\n    connection.on(\"ReceiveChatMessageFromSomeOne\", (message, usernameSend, usernameReceive) => {\n      console.log(\"đã nhận:\", message, \"Form\", usernameSend);\n      fetch(URL.URL_GETUSERNAME, {\n        method: \"GET\"\n      }).then(Response => Response.json()).then(data => {\n        console.log(data);\n        this.props.updateUser(data);\n      });\n      this.props.updateChat(usernameSend, message);\n      this.setState({\n        chatToggle: true\n      });\n      console.log(usernameSend, usernameReceive);\n\n      if (usernameSend !== this.props.LoginUserName) {\n        this.props.updateUserChatWith(usernameReceive);\n      } else this.props.updateUserChatWith(usernameSend);\n    });\n  }\n\n  toggleChat() {\n    this.setState({\n      chatToggle: !this.state.chatToggle\n    });\n    fetch(URL.URL_GETUSERNAME, {\n      method: \"GET\"\n    }).then(Response => Response.json()).then(data => {\n      console.log(data);\n      this.props.updateUser(data);\n    });\n  }\n\n  getTask() {\n    fetch(URL.URL_API).then(response => response.json()).catch(e => {\n      console.log(\"Err\", e);\n    }).then(data => {\n      // console.log(data);\n      localStorage.setItem(\"Tasks\", JSON.stringify(data)); // Cookies.set(\"Task\", data);\n      // console.log(localStorage.getItem(\"Tasks\"));\n    });\n  }\n\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async AddTask(Values) {\n    console.log(Values);\n    let tl = JSON.parse(localStorage.getItem(\"Tasks\"));\n    let lastTask = tl[tl.length - 1];\n    this.props.addTaskAction({\n      id: parseInt(lastTask.id + 1),\n      name: Values.name,\n      level: parseInt(Values.level)\n    });\n    this.props.closeFormAction();\n    await this.sleep(750);\n    this.props.updateChart();\n  }\n\n  checkLogin() {\n    fetch(URL.URL_CHECK_LOGIN, {\n      method: \"GET\"\n    }).then(Response => Response.json()).then(data => {\n      if (data.userName === null) {\n        this.props.NotLogin();\n      } else {\n        this.getTask();\n        this.props.IsLogin();\n      }\n    });\n  }\n\n  logout() {\n    fetch(URL.URL_LOGOUT, {\n      method: \"GET\"\n    }).then(Response => Response.json()).then(data => {\n      // console.log(data);\n      // console.log(data.isCompleted);\n      if (data.isCompleted) {\n        this.props.NotLogin();\n      }\n    });\n  }\n\n  UNSAFE_componentWillMount() {\n    console.log(\"UNSAFE_componentWillMount\");\n    this.checkLogin();\n  }\n\n  render() {\n    console.log(\"render App\");\n\n    if (this.props.showForm) {\n      // console.log(\"d\");\n      var form = /*#__PURE__*/React.createElement(AddTaskReduxForm, {\n        form: \"AddForm\",\n        onSubmit: this.AddTask,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }\n      });\n    } else form = null;\n\n    if (this.props.showChart) {\n      var chart = /*#__PURE__*/React.createElement(Chart, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 25\n        }\n      }, \" \");\n    } else chart = null;\n\n    if (this.props.isLogin) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(AppNavbar, {\n        toggleChat: this.toggleChat,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Search, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(SortDropDown, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(ShowChartButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(AddTaskButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }\n      }, form), /*#__PURE__*/React.createElement(Row, {\n        style: {\n          backgroundColor: \"#1b262c\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          margin: \"1rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }\n      }, chart), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(TaskTable // connection={this.props.connection}\n      , {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 29\n        }\n      })), this.state.chatToggle ? /*#__PURE__*/React.createElement(Col, {\n        className: \"chat_row\",\n        md: {\n          span: 6,\n          offset: 6\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 33\n        }\n      }, \">\", /*#__PURE__*/React.createElement(ChatGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 38\n        }\n      }), /*#__PURE__*/React.createElement(Chatbox, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 37\n        }\n      }), \">\")) : null));\n    } else if (!this.props.isLogin) return /*#__PURE__*/React.createElement(SignInSignUpRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 20\n      }\n    });\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return {\n    addTaskAction: task => {\n      dispatch(Action.addTask(task));\n    },\n    closeFormAction: () => {\n      dispatch(Action.closeForm());\n    },\n    // setNewTask: (task) => {\n    //     dispatch(Action.setNewTask(task));\n    // },\n    updateChart: () => {\n      dispatch(Action.resetChart());\n    },\n    // ToggleLogin: () => {\n    //     dispatch(Action.toggleLogin());\n    // },\n    IsLogin: () => {\n      dispatch(Action.isLogin());\n    },\n    NotLogin: () => {\n      dispatch(Action.notLogin());\n    },\n    updateUser: username => {\n      dispatch(Action.updateUser(username));\n    },\n    resetTask: () => {\n      dispatch(Action.resetTask());\n    },\n    updateChat: (username, message) => {\n      dispatch(Action.updateChat(username, message));\n    },\n    updateUser: listUser => {\n      dispatch(Action.updateListUser(listUser));\n    },\n    updateUserChatWith: username => {\n      dispatch(Action.updateUserChatWith(username));\n    }\n  };\n}\n\nconst mapStateToProps = state => ({\n  isLogin: state.IsLogin,\n  showForm: state.ToggleForm,\n  showChart: state.ToggleChart,\n  username: state.LoginUserName\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["E:/Học Tập/React-Redux/react-app/src/App.js"],"names":["React","Component","Container","Row","Search","SortDropDown","Action","URL","AddTaskButton","Button","Chatbox","TaskTable","ShowChartButton","AddTaskReduxForm","Chart","connect","SignInSignUpRouter","AppNavbar","connection","connectionStart","ChatGroup","FontAwesomeIcon","faComments","Col","App","constructor","props","state","chatToggle","AddTask","bind","checkLogin","toggleChat","on","message","console","log","fetch","method","then","response","json","catch","e","error","data","localStorage","setItem","JSON","stringify","resetTask","componentDidMount","usernameSend","usernameReceive","URL_GETUSERNAME","Response","updateUser","updateChat","setState","LoginUserName","updateUserChatWith","getTask","URL_API","sleep","ms","Promise","resolve","setTimeout","Values","tl","parse","getItem","lastTask","length","addTaskAction","id","parseInt","name","level","closeFormAction","updateChart","URL_CHECK_LOGIN","userName","NotLogin","IsLogin","logout","URL_LOGOUT","isCompleted","UNSAFE_componentWillMount","render","showForm","form","showChart","chart","isLogin","backgroundColor","alignItems","justifyContent","margin","span","offset","mapDispatchToProps","dispatch","task","addTask","closeForm","resetChart","notLogin","username","listUser","updateListUser","mapStateToProps","ToggleForm","ToggleChart"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Search from \"./Component/Search\";\nimport SortDropDown from \"./Component/SortDropDown\";\nimport * as Action from \"./Actions/index\";\nimport * as URL from \"./Const/URL\";\nimport AddTaskButton from \"./Component/AddTaskButton\";\nimport Button from \"react-bootstrap/Button\";\nimport Chatbox from \"./Component/Chatbox\";\nimport TaskTable from \"./Component/TaskTable\";\nimport ShowChartButton from \"./Component/ShowChartButton\";\nimport AddTaskReduxForm from \"./Component/AddTaskReduxForm\";\nimport Chart from \"./Component/Chart\";\nimport { connect } from \"react-redux\";\nimport SignInSignUpRouter from \"./Component/SignInSignUpRouter\";\nimport AppNavbar from \"./Component/AppNavbar\";\nimport connection from \"./Reducer/ConnectHub\";\nimport { connectionStart } from \"./Reducer/ConnectHub\";\nimport ChatGroup from \"./Component/ChatGroup\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faComments } from \"@fortawesome/free-solid-svg-icons\";\nimport { Col } from \"react-bootstrap\";\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            chatToggle: false,\n        };\n        this.AddTask = this.AddTask.bind(this);\n        this.checkLogin = this.checkLogin.bind(this);\n        this.toggleChat = this.toggleChat.bind(this);\n        connection.on(\"ReceiveMessage\", (message) => {\n            console.log(\"đã nhận:\", message);\n            fetch(\"http://localhost:3000/api/Todo\", {\n                method: \"GET\",\n            })\n                .then((response) => {\n                    // console.log(response);\n                    return response.json();\n                })\n                .catch((e) => {\n                    console.error(\"Err\", e);\n                })\n                .then((data) => {\n                    // console.log(data);\n                    localStorage.setItem(\"Tasks\", JSON.stringify(data));\n                    // console.log(data);\n                    // Cookies.set(\"Task\", data);\n                    // console.log(localStorage.getItem(\"Tasks\"));\n                })\n                .then(() => {\n                    this.props.resetTask();\n                });\n        });\n    }\n    componentDidMount() {\n        connection.on(\n            \"ReceiveChatMessageFromSomeOne\",\n            (message, usernameSend, usernameReceive) => {\n                console.log(\"đã nhận:\", message, \"Form\", usernameSend);\n                fetch(URL.URL_GETUSERNAME, { method: \"GET\" })\n                    .then((Response) => Response.json())\n                    .then((data) => {\n                        console.log(data);\n                        this.props.updateUser(data);\n                    });\n                this.props.updateChat(usernameSend, message);\n                this.setState({\n                    chatToggle: true,\n                });\n                console.log(usernameSend, usernameReceive);\n                if (usernameSend !== this.props.LoginUserName) {\n                    this.props.updateUserChatWith(usernameReceive);\n                } else this.props.updateUserChatWith(usernameSend);\n            }\n        );\n    }\n\n    toggleChat() {\n        this.setState({ chatToggle: !this.state.chatToggle });\n        fetch(URL.URL_GETUSERNAME, { method: \"GET\" })\n            .then((Response) => Response.json())\n            .then((data) => {\n                console.log(data);\n                this.props.updateUser(data);\n            });\n    }\n\n    getTask() {\n        fetch(URL.URL_API)\n            .then((response) => response.json())\n            .catch((e) => {\n                console.log(\"Err\", e);\n            })\n            .then((data) => {\n                // console.log(data);\n                localStorage.setItem(\"Tasks\", JSON.stringify(data));\n                // Cookies.set(\"Task\", data);\n                // console.log(localStorage.getItem(\"Tasks\"));\n            });\n    }\n\n    sleep(ms) {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n    async AddTask(Values) {\n        console.log(Values);\n        let tl = JSON.parse(localStorage.getItem(\"Tasks\"));\n        let lastTask = tl[tl.length - 1];\n        this.props.addTaskAction({\n            id: parseInt(lastTask.id + 1),\n            name: Values.name,\n            level: parseInt(Values.level),\n        });\n        this.props.closeFormAction();\n        await this.sleep(750);\n        this.props.updateChart();\n    }\n    checkLogin() {\n        fetch(URL.URL_CHECK_LOGIN, {\n            method: \"GET\",\n        })\n            .then((Response) => Response.json())\n            .then((data) => {\n                if (data.userName === null) {\n                    this.props.NotLogin();\n                } else {\n                    this.getTask();\n                    this.props.IsLogin();\n                }\n            });\n    }\n\n    logout() {\n        fetch(URL.URL_LOGOUT, {\n            method: \"GET\",\n        })\n            .then((Response) => Response.json())\n            .then((data) => {\n                // console.log(data);\n                // console.log(data.isCompleted);\n                if (data.isCompleted) {\n                    this.props.NotLogin();\n                }\n            });\n    }\n\n    UNSAFE_componentWillMount() {\n        console.log(\"UNSAFE_componentWillMount\");\n        this.checkLogin();\n    }\n\n    render() {\n        console.log(\"render App\");\n        if (this.props.showForm) {\n            // console.log(\"d\");\n            var form = (\n                <AddTaskReduxForm\n                    form=\"AddForm\"\n                    onSubmit={this.AddTask}\n                ></AddTaskReduxForm>\n            );\n        } else form = null;\n\n        if (this.props.showChart) {\n            var chart = <Chart> </Chart>;\n        } else chart = null;\n        if (this.props.isLogin) {\n            return (\n                <div>\n                    <Container fluid>\n                        {/* <Values form=\"row\" /> */}\n                        <AppNavbar toggleChat={this.toggleChat}></AppNavbar>\n\n                        <Row>\n                            <Search></Search>\n                            <SortDropDown></SortDropDown>\n                            <ShowChartButton></ShowChartButton>\n                            <AddTaskButton></AddTaskButton>\n                        </Row>\n\n                        <Row>{form}</Row>\n                        {/* <Chart> </Chart> */}\n                        <Row\n                            style={{\n                                backgroundColor: \"#1b262c\",\n                                alignItems: \"center\",\n                                justifyContent: \"center\",\n                                margin: \"1rem\",\n                            }}\n                        >\n                            {chart}\n                        </Row>\n                        <Row>\n                            <TaskTable\n                            // connection={this.props.connection}\n                            ></TaskTable>\n                        </Row>\n                        {this.state.chatToggle ? (\n                            <Col\n                                className=\"chat_row\"\n                                md={{ span: 6, offset: 6 }}\n                            >\n                                <Row>\n                                    ><ChatGroup></ChatGroup>\n                                    <Chatbox></Chatbox>>\n                                </Row>\n                            </Col>\n                        ) : null}\n                    </Container>\n                    {/* <div className=\"chatboxflow\"> */}\n                    {/* <Button className=\"btn-chatbox\" onClick={this.toggleChat}>\n                        <FontAwesomeIcon icon={faComments} size=\"1x\" />\n                    </Button> */}\n\n                    {/* </div> */}\n                </div>\n            );\n        } else if (!this.props.isLogin)\n            return <SignInSignUpRouter></SignInSignUpRouter>;\n    }\n}\nfunction mapDispatchToProps(dispatch, props) {\n    return {\n        addTaskAction: (task) => {\n            dispatch(Action.addTask(task));\n        },\n        closeFormAction: () => {\n            dispatch(Action.closeForm());\n        },\n        // setNewTask: (task) => {\n        //     dispatch(Action.setNewTask(task));\n        // },\n        updateChart: () => {\n            dispatch(Action.resetChart());\n        },\n        // ToggleLogin: () => {\n        //     dispatch(Action.toggleLogin());\n        // },\n        IsLogin: () => {\n            dispatch(Action.isLogin());\n        },\n        NotLogin: () => {\n            dispatch(Action.notLogin());\n        },\n        updateUser: (username) => {\n            dispatch(Action.updateUser(username));\n        },\n        resetTask: () => {\n            dispatch(Action.resetTask());\n        },\n        updateChat: (username, message) => {\n            dispatch(Action.updateChat(username, message));\n        },\n        updateUser: (listUser) => {\n            dispatch(Action.updateListUser(listUser));\n        },\n        updateUserChatWith: (username) => {\n            dispatch(Action.updateUserChatWith(username));\n        },\n    };\n}\nconst mapStateToProps = (state) => ({\n    isLogin: state.IsLogin,\n    showForm: state.ToggleForm,\n    showChart: state.ToggleChart,\n    username: state.LoginUserName,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}