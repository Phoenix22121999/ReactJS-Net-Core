{"ast":null,"code":"import * as TYPE from \"../Const/Types\";\nimport TaskList from \"../Tasks/Task.json\";\nimport * as URL from \"../Const/URL\";\nimport Cookies from \"js-cookie\"; // import $ from \"jquery\";\n\nvar local;\nlocal = localStorage.getItem(\"Tasks\");\n\nif (local === \"undefined\") {\n  console.log(\"resetdata\"); //local = JSON.stringify(TaskList.Task);\n\n  localStorage.setItem(\"Tasks\", JSON.stringify(TaskList.Task));\n}\n\nlocal = localStorage.getItem(\"Tasks\");\n\nfunction getTask() {\n  fetch(\"http://localhost:3000/api/TodoTasks\").then(response => response.json()).catch(e => {\n    console.log(\"Err\", e);\n  }).then(data => {\n    console.log(data);\n    Cookies.set(\"Task\", data);\n    console.log(Cookies.get(\"Task\"));\n  });\n}\n\ngetTask(); // fetch(\"http://localhost:3000/api/TodoTasks\")\n//     .then((response) => response.json())\n//     .catch((e) => {\n//         console.log(\"Err\", e);\n//     })\n//     .then((data) => {\n//         console.log(data);\n//         Cookies.set(\"Task\", data);\n//         console.log(Cookies.get(\"Task\"));\n//     });\n\nconsole.log(JSON.parse(Cookies.get(\"Task\")));\nconst initialState = JSON.parse(Cookies.get(\"Task\"));\n\nfunction addTask(task) {\n  const item = {\n    isComplete: false,\n    name: addNameTextbox.value.trim()\n  };\n  fetch(uri, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(item)\n  }).then(response => response.json()).then(() => {\n    getTask();\n    addNameTextbox.value = \"\";\n  }).catch(error => console.error(\"Unable to add item.\", error));\n}\n\nfunction sort(arr, by, dir) {\n  switch (by) {\n    case \"Name\":\n      switch (dir) {\n        case \"DESC\":\n          return arr.sort((a, b) => {\n            // console.log(\"DESC\", a.name - b.name);\n            if (b.name < a.name) {\n              return -1;\n            }\n\n            if (b.name > a.name) {\n              return 1;\n            } // name trùng nhau\n\n\n            return 0; // return b.name - a.name;\n          });\n\n        default:\n          return arr.sort((a, b) => {\n            // console.log(\"ASC\", a.name - b.name);\n            if (b.name < a.name) {\n              return 1;\n            }\n\n            if (b.name > a.name) {\n              return -1;\n            }\n\n            return 0;\n          });\n      }\n\n    default:\n      switch (dir) {\n        case \"DESC\":\n          return arr.sort((a, b) => {\n            return b.level - a.level;\n          });\n\n        default:\n          return arr.sort((a, b) => {\n            return a.level - b.level;\n          });\n      }\n\n  }\n}\n\nexport default ((state = initialState, action) => {\n  switch (action.type) {\n    case TYPE.LIST:\n      // console.log(\"reducer\", action);\n      return state;\n\n    case TYPE.ADD_TASK:\n      // console.log(\"reducer\", action);\n      state.push(action.task); // console.log(\"state\", state);\n      // console.log(\"js\", JSON.stringify(state));\n\n      localStorage.setItem(\"Tasks\", JSON.stringify(state));\n      return [...state];\n\n    case TYPE.DELETE_TASK:\n      // console.log(\"reducer\", action);\n      let tmpArr = JSON.parse(localStorage.getItem(\"Tasks\")).filter(task => {\n        return task.name !== action.taskName;\n      });\n      let tmpArr2 = state.filter(task => {\n        return task.name !== action.taskName;\n      }); // console.log(\"state\", tmpArr);\n      // console.log(\"js\", JSON.stringify(tmpArr));\n\n      localStorage.setItem(\"Tasks\", JSON.stringify(tmpArr));\n      return [...tmpArr2];\n\n    case TYPE.UPDATE_TASK:\n      console.log(\"Update\", action);\n      let updateArr = state.map(task => {\n        if (task.name === action.oldName) {\n          return {\n            name: action.newTask.name,\n            level: action.newTask.level\n          };\n        } else return task;\n      }); // console.log(\"state\", updateArr);\n      // console.log(\"js\", JSON.stringify(updateArr));\n\n      localStorage.setItem(\"Tasks\", JSON.stringify(updateArr));\n      return [...updateArr];\n\n    case TYPE.SEARCH:\n      // console.log(\"SEARCH\", action);\n      // JSON.parse(localStorage.getItem(\"Tasks\"))\n      const taskListSearched = JSON.parse(localStorage.getItem(\"Tasks\")).filter(task => {\n        return task.name.toLowerCase().includes(action.search.toLowerCase());\n      }); // console.log(\"state\", state);\n      // console.log(\"js\", JSON.stringify(taskListSearched));\n      // localStorage.setItem(\"Tasks\", JSON.stringify(updateArr));\n\n      return [...taskListSearched];\n\n    case TYPE.SORT:\n      // console.log(\"Sort\", action);\n      // console.log(\"state\", state);\n      // JSON.parse(localStorage.getItem(\"Tasks\"))\n      const taskListSorted = sort(state, action.by, action.dir); // console.log(\"state\", taskListSorted);\n      // console.log(\"js\", JSON.stringify(taskListSearched));\n      // localStorage.setItem(\"Tasks\", JSON.stringify(updateArr));\n\n      return [...taskListSorted];\n\n    default:\n      return state;\n  }\n\n  return state;\n});","map":{"version":3,"sources":["E:/Học Tập/React-Redux/react-app/src/Reducer/ListTask.js"],"names":["TYPE","TaskList","URL","Cookies","local","localStorage","getItem","console","log","setItem","JSON","stringify","Task","getTask","fetch","then","response","json","catch","e","data","set","get","parse","initialState","addTask","task","item","isComplete","name","addNameTextbox","value","trim","uri","method","headers","Accept","body","error","sort","arr","by","dir","a","b","level","state","action","type","LIST","ADD_TASK","push","DELETE_TASK","tmpArr","filter","taskName","tmpArr2","UPDATE_TASK","updateArr","map","oldName","newTask","SEARCH","taskListSearched","toLowerCase","includes","search","SORT","taskListSorted"],"mappings":"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","sourcesContent":["import * as TYPE from \"../Const/Types\";\r\nimport TaskList from \"../Tasks/Task.json\";\r\nimport * as URL from \"../Const/URL\";\r\nimport Cookies from \"js-cookie\";\r\n// import $ from \"jquery\";\r\nvar local;\r\nlocal = localStorage.getItem(\"Tasks\");\r\nif (local === \"undefined\") {\r\n    console.log(\"resetdata\");\r\n    //local = JSON.stringify(TaskList.Task);\r\n    localStorage.setItem(\"Tasks\", JSON.stringify(TaskList.Task));\r\n}\r\nlocal = localStorage.getItem(\"Tasks\");\r\nfunction getTask() {\r\n    fetch(\"http://localhost:3000/api/TodoTasks\")\r\n        .then((response) => response.json())\r\n        .catch((e) => {\r\n            console.log(\"Err\", e);\r\n        })\r\n        .then((data) => {\r\n            console.log(data);\r\n            Cookies.set(\"Task\", data);\r\n            console.log(Cookies.get(\"Task\"));\r\n        });\r\n}\r\ngetTask();\r\n// fetch(\"http://localhost:3000/api/TodoTasks\")\r\n//     .then((response) => response.json())\r\n//     .catch((e) => {\r\n//         console.log(\"Err\", e);\r\n//     })\r\n//     .then((data) => {\r\n//         console.log(data);\r\n//         Cookies.set(\"Task\", data);\r\n//         console.log(Cookies.get(\"Task\"));\r\n//     });\r\n\r\nconsole.log(JSON.parse(Cookies.get(\"Task\")));\r\nconst initialState = JSON.parse(Cookies.get(\"Task\"));\r\n\r\nfunction addTask(task) {\r\n    const item = {\r\n        isComplete: false,\r\n        name: addNameTextbox.value.trim(),\r\n    };\r\n\r\n    fetch(uri, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(item),\r\n    })\r\n        .then((response) => response.json())\r\n        .then(() => {\r\n            getTask();\r\n            addNameTextbox.value = \"\";\r\n        })\r\n        .catch((error) => console.error(\"Unable to add item.\", error));\r\n}\r\n\r\nfunction sort(arr, by, dir) {\r\n    switch (by) {\r\n        case \"Name\":\r\n            switch (dir) {\r\n                case \"DESC\":\r\n                    return arr.sort((a, b) => {\r\n                        // console.log(\"DESC\", a.name - b.name);\r\n                        if (b.name < a.name) {\r\n                            return -1;\r\n                        }\r\n                        if (b.name > a.name) {\r\n                            return 1;\r\n                        }\r\n\r\n                        // name trùng nhau\r\n                        return 0;\r\n                        // return b.name - a.name;\r\n                    });\r\n\r\n                default:\r\n                    return arr.sort((a, b) => {\r\n                        // console.log(\"ASC\", a.name - b.name);\r\n                        if (b.name < a.name) {\r\n                            return 1;\r\n                        }\r\n                        if (b.name > a.name) {\r\n                            return -1;\r\n                        }\r\n                        return 0;\r\n                    });\r\n            }\r\n\r\n        default:\r\n            switch (dir) {\r\n                case \"DESC\":\r\n                    return arr.sort((a, b) => {\r\n                        return b.level - a.level;\r\n                    });\r\n\r\n                default:\r\n                    return arr.sort((a, b) => {\r\n                        return a.level - b.level;\r\n                    });\r\n            }\r\n    }\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case TYPE.LIST:\r\n            // console.log(\"reducer\", action);\r\n            return state;\r\n        case TYPE.ADD_TASK:\r\n            // console.log(\"reducer\", action);\r\n            state.push(action.task);\r\n            // console.log(\"state\", state);\r\n            // console.log(\"js\", JSON.stringify(state));\r\n            localStorage.setItem(\"Tasks\", JSON.stringify(state));\r\n            return [...state];\r\n        case TYPE.DELETE_TASK:\r\n            // console.log(\"reducer\", action);\r\n\r\n            let tmpArr = JSON.parse(localStorage.getItem(\"Tasks\")).filter(\r\n                (task) => {\r\n                    return task.name !== action.taskName;\r\n                }\r\n            );\r\n            let tmpArr2 = state.filter((task) => {\r\n                return task.name !== action.taskName;\r\n            });\r\n            // console.log(\"state\", tmpArr);\r\n            // console.log(\"js\", JSON.stringify(tmpArr));\r\n            localStorage.setItem(\"Tasks\", JSON.stringify(tmpArr));\r\n\r\n            return [...tmpArr2];\r\n        case TYPE.UPDATE_TASK:\r\n            console.log(\"Update\", action);\r\n            let updateArr = state.map((task) => {\r\n                if (task.name === action.oldName) {\r\n                    return {\r\n                        name: action.newTask.name,\r\n                        level: action.newTask.level,\r\n                    };\r\n                } else return task;\r\n            });\r\n            // console.log(\"state\", updateArr);\r\n            // console.log(\"js\", JSON.stringify(updateArr));\r\n            localStorage.setItem(\"Tasks\", JSON.stringify(updateArr));\r\n            return [...updateArr];\r\n        case TYPE.SEARCH:\r\n            // console.log(\"SEARCH\", action);\r\n            // JSON.parse(localStorage.getItem(\"Tasks\"))\r\n            const taskListSearched = JSON.parse(\r\n                localStorage.getItem(\"Tasks\")\r\n            ).filter((task) => {\r\n                return task.name\r\n                    .toLowerCase()\r\n                    .includes(action.search.toLowerCase());\r\n            });\r\n            // console.log(\"state\", state);\r\n            // console.log(\"js\", JSON.stringify(taskListSearched));\r\n            // localStorage.setItem(\"Tasks\", JSON.stringify(updateArr));\r\n            return [...taskListSearched];\r\n        case TYPE.SORT:\r\n            // console.log(\"Sort\", action);\r\n            // console.log(\"state\", state);\r\n\r\n            // JSON.parse(localStorage.getItem(\"Tasks\"))\r\n            const taskListSorted = sort(state, action.by, action.dir);\r\n            // console.log(\"state\", taskListSorted);\r\n            // console.log(\"js\", JSON.stringify(taskListSearched));\r\n            // localStorage.setItem(\"Tasks\", JSON.stringify(updateArr));\r\n            return [...taskListSorted];\r\n        default:\r\n            return state;\r\n    }\r\n    return state;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}